<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>총공 랜덤 플레이어 - 어르신용</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f0f8f8;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

#player-wrapper {
    width: 90%;
    max-width: 900px;
    height: 50vh;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

#player { width: 100%; height: 100%; }

.status {
    margin-top: 15px;
    font-weight: 700;
    font-size: 1.5rem;
    color: #00796b;
    text-align: center;
}

.timer {
    margin-top: 5px;
    font-weight: 700;
    font-size: 1.5rem;
    color: #00796b;
    text-align: center;
}

#start-btn {
    margin-top: 20px;
    padding: 12px 30px;
    background: #00796b;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    font-size: 1.2rem;
}

#start-btn:hover { background: #009688; }

#next-video {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#next-video img {
    width: 200px;
    border-radius: 8px;
}

#next-video .title {
    margin-top: 8px;
    font-size: 1.2rem;
    color: #000;
    text-align: center;
}

.thumbnail-list {
    margin-top: 25px;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

.thumb {
    width: 150px;
    text-align: center;
    cursor: pointer;
}

.thumb img {
    width: 100%;
    border-radius: 8px;
}

.thumb .thumb-title {
    margin-top: 6px;
    font-size: 1rem;
    color: #000;
    text-align: center;
}
</style>
</head>
<body>

<div id="player-wrapper">
    <div id="player"></div>
</div>

<div class="status">현재 재생: <span id="current-title">준비 중...</span></div>
<div class="timer">남은 시간: <span id="remaining-time">0</span>초</div>
<button id="start-btn">▶ 랜덤 재생 시작</button>

<div id="next-video">
    <img src="" alt="다음 영상" id="next-thumb">
    <div class="title" id="next-title"></div>
</div>

<div class="thumbnail-list" id="thumbnail-list"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const videos = [
 { id: 'ZJo6KHpI-2k', title: '한계령 (Hankyeryeong Pass) Official MV' },
            { id: 'BRiBNS0aTVo', title: '내 곁에 있어주 | 야외녹음실 ｜LIVE' },
            { id: '-zYhlQn6yVI', title: '내 이름 아시죠 | 사랑의콜센타' },
            { id: '0JeQF_nrSmU', title: '내 곁에 있어주 (Stay by My Side) Official MV' },
            { id: 'jXJKJc5fZnE', title: '홀로된 사랑 (Lonely Love) Official MV' },
            { id: '6lq_G6l4xRs', title: 'Lonely Love(홀로된 사랑) | 1theK' }

];

let player, timer=null, remaining=0, currentVideo=null, nextVideo=null;
const currentTitleEl = document.getElementById("current-title");
const remainingEl = document.getElementById("remaining-time");
const nextThumbEl = document.getElementById("next-thumb");
const nextTitleEl = document.getElementById("next-title");

// 썸네일 리스트 생성
const thumbContainer = document.getElementById("thumbnail-list");
videos.forEach(v=>{
    const div = document.createElement("div");
    div.className="thumb";
    div.innerHTML=`<img src="https://img.youtube.com/vi/${v.id}/hqdefault.jpg" alt="${v.title}">
                   <div class="thumb-title">${v.title}</div>`;
    div.onclick=()=>playVideo(v.id, v.title);
    thumbContainer.appendChild(div);
});

// YouTube API
function onYouTubeIframeAPIReady(){
    player = new YT.Player("player",{
        videoId: videos[0].id,
        playerVars:{ autoplay:0, controls:1, rel:0, modestbranding:1 }
    });
}

function getRandomDuration(){ return Math.floor(Math.random()*11)+45; }

function pickNextVideo(){
    let idx;
    do { idx = Math.floor(Math.random()*videos.length); }
    while(videos[idx].id === currentVideo?.id && videos.length>1);
    nextVideo = videos[idx];
    nextThumbEl.src = `https://img.youtube.com/vi/${nextVideo.id}/hqdefault.jpg`;
    nextTitleEl.textContent = nextVideo.title;
}

function playRandomVideo(){ pickNextVideo(); playVideo(nextVideo.id, nextVideo.title); }

function playVideo(id, title){
    if(timer) clearInterval(timer);
    remaining=0;
    currentVideo={id,title};
    currentTitleEl.textContent=title;
    remainingEl.textContent=remaining;
    pickNextVideo();
    player.loadVideoById(id);
    startTimer();
}

function startTimer(){
    remaining = getRandomDuration();
    remainingEl.textContent=remaining;
    timer=setInterval(()=>{
        remaining--;
        remainingEl.textContent=remaining;
        if(remaining<=0){
            clearInterval(timer);
            playRandomVideo();
        }
    },1000);
}

document.getElementById("start-btn").addEventListener("click",()=>{ playRandomVideo(); });
</script>

</body>
</html>
